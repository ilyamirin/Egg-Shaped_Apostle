@startuml

actor "Operator"
actor "Customer"

box "raspberry"
participant "Audio card"
participant "Audio service"
end box

box "Machine in a branch's server room (BSR)"
collections "Audio files on\n the machine in a BSR"
participant "sFTP server"
end box

box "Machine in our workplace"
participant "sFTP client"
collections "Audio files on\nmachine in a workspace"
participant "Text Service"
database "Text DB"
participant "Full text engine"
participant "Counters service"
participant "Pattern finder"
end box

box "Client's machine"
participant "UI"
end box

actor "Manager"

"Operator" -> "Audio card" : analog audio signal
"Customer" -> "Audio card" : analog audio signal
"Audio card" -> "Audio service" : audio signal
"Audio service" -> "sFTP server": audio file
"Audio files on\nmachine in a workspace" -> "Text Service": audio file\n and metadata
"sFTP server" <-> "Audio files on\n the machine in a BSR": audio file
"sFTP server" -> "sFTP client": audio file
"sFTP client" -> "Audio files on\nmachine in a workspace": audio file
"Text Service" -> "Text DB" : text\n and metadata

"Full text engine" <-> "Text DB" : SQL-query\ntext and metadata
"Counters service" <-> "Text DB" : SQL-query\ntext and metadata
"Pattern finder" <-> "Text DB" : SQL-query\ntext and metadata

"Full text engine" <-> "UI" : REST
"Counters service" <-> "UI" : REST
"Pattern finder" <-> "UI" : REST
"UI" <-> "Manager" : i/o
@enduml
