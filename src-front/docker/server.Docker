FROM node:13.8-alpine as builder

WORKDIR /var/www

COPY package.json yarn.lock ./
RUN yarn install

COPY . .
RUN yarn build

FROM nginx:1.17-alpine

WORKDIR /var/www

COPY ./docker/default.conf /etc/nginx/conf.d/
RUN nginx -t

COPY --from=builder /var/www/dist/places-search public

EXPOSE 80
